<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ספירה לאחור לחתונה❤️</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* אנימציה שמזמינה את המשתמש ללחוץ על התפריט */
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
            }
            100% {
                transform: scale(1);
            }
        }

        /* החלת האנימציה על סמל התפריט החדש */
        #openSecretMenuIcon.pulsate {
            animation: pulse 1s infinite;
        }

        /* עיצוב תיבת הקלט */
        #ideaInputContainer {
            display: none;
            position: fixed;
            top: 30vh;
            left: 10vw;
            width: 80vw;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 4;
            padding: 20px;
            border-radius: 10px;
            color: white;
        }

        #ideaInputContainer textarea {
            width: 100%;
            height: 100px;
            padding: 10px;
            font-size: 16px;
            border-radius: 5px;
            border: none;
            margin-bottom: 20px;
        }

        #ideaInputContainer button {
            padding: 10px 20px;
            background-color: #FFD700;
            color: black;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        #ideaInputContainer button:hover {
            background-color: #FFA500;
        }
    </style>
</head>
<body>
    <div class="overlay"></div>
    <h1>החתונה בעוד...!!!</h1>
    <div id="timer">
        <span id="weeks" class="time-part"></span>
        <span id="days" class="time-part"></span>
        <span id="hours" class="time-part"></span>
        <span id="minutes" class="time-part"></span>
        <span id="seconds" class="time-part"></span>
    </div>

    <!-- סמל תפריט מקורי בצורה של ☰ -->
    <div id="openMenuIcon">☰</div>

    <!-- תפריט מקורי -->
    <div class="dropdown-menu" id="menu" style="display: none;">
        <a href="#" id="toggleDisplayMode">החלף תצוגה לימים בלבד</a>
        <a href="#" id="toggleAutoChange">התחל/הפסק החלפת תמונות אוטומטית</a>
        <a href="#" id="changeBrightness">בחר רמת בהירות</a>
        <a href="#" id="toggleMouseHearts">הפעל לבבות של העכבר</a>
        <a href="#" id="changeFont">החלף פונט</a>
        <a href="#" id="heartSettings">הגדרות לבבות</a>
        <a href="#" id="toggleFullScreen">מסך מלא</a>
        <a href="#" id="uploadBackground">העלה תמונת רקע</a>
        <a href="mailto:a0527121640@gmail.com?subject=משוב&body=שלום, אשמח לשלוח משוב.">צור קשר</a>
    </div>

    <!-- סמל תפריט חדש בצורה של ❤️ -->
    <div id="openSecretMenuIcon" style="display: none; position: fixed; top: 60px; right: 20px; cursor: pointer; font-size: 40px; z-index: 3;">❤️</div>

    <!-- תפריט חדש שנפתח לאחר הקלדת "אביגיל" -->
    <div class="dropdown-menu" id="secretMenu" style="display: none; position: fixed; top: 100px; right: 20px;">
        <h3>ארי-אביגיל</h3>
        <a href="#" id="openIdeaInput">אפשרות סודית 1: כתיבת רעיון</a>
        <a href="#">אפשרות סודית 2</a>
        <a href="#">אפשרות סודית 3</a>
    </div>

    <div id="secretHeart" style="display: none; font-size: 100px;">❤️</div>

    <!-- תיבת קלט לרעיון -->
    <div id="ideaInputContainer">
        <textarea id="ideaInput" placeholder="כתוב את הרעיון שלך כאן..."></textarea>
        <button id="submitIdea">שלח רעיון</button>
    </div>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database.js"></script>
    <script>
      // הגדרות Firebase
      const firebaseConfig = {
        apiKey: "AIzaSyArRmykK3Vy_qhg811ZV8En3aNnEq9siFY",
        authDomain: "my-website-wedding.firebaseapp.com",
        projectId: "my-website-wedding",
        storageBucket: "my-website-wedding.appspot.com",
        messagingSenderId: "40275814976",
        appId: "1:40275814976:web:a973218ec4072f21978da5"
      };

      // אתחול Firebase
      const app = firebase.initializeApp(firebaseConfig);
      const db = firebase.database();

      // פונקציות לשמירה וטעינת נתונים
      function saveIdea(idea) {
          db.ref('ideas/').set({
              text: idea
          });
      }

      function loadIdea() {
          db.ref('ideas/').get().then((snapshot) => {
              if (snapshot.exists()) {
                  document.getElementById('ideaInput').value = snapshot.val().text;
              }
          });
      }

      // קריאה לטעינת הרעיון כאשר הדף נטען
      loadIdea();

      document.getElementById('submitIdea').addEventListener('click', function() {
          const idea = document.getElementById('ideaInput').value;
          if (idea) {
              saveIdea(idea);
              alert(`הרעיון שלך נשמר: ${idea}`);
          } else {
              alert('אנא הזן רעיון לפני שליחתו.');
          }
      });
    </script>

    <script src="background-images.js"></script>
    <script src="script.js"></script>
    
    <!-- הוספת הקוד לטיפול בקוד הסודי ולהצגת התפריטים -->
    <script>
    let startTime = new Date();
    let inputSequence = "";

    document.addEventListener('keydown', function(event) {
        let currentTime = new Date();
        let timeDiff = (currentTime - startTime) / 1000;

        if (timeDiff <= 60) { 
            inputSequence += event.key;

            if (inputSequence.includes("אריגיל")) {
                // הצגת הסמל "❤️"
                document.getElementById('secretHeart').style.display = 'block';

                // הצגת סמל התפריט החדש עם אנימציה
                const secretMenuIcon = document.getElementById('openSecretMenuIcon');
                secretMenuIcon.style.display = 'block';
                secretMenuIcon.classList.add('pulsate');

                // הסתרת הסמל אחרי כמה שניות
                setTimeout(function() {
                    document.getElementById('secretHeart').style.display = 'none';
                }, 3000);

                // הפעלת סקריפט הלבבות פעם אחת
                createHearts();
            }
        }
    });

    // פתיחת התפריט המקורי כאשר העכבר עובר על הסמל
    document.getElementById('openMenuIcon').addEventListener('mouseenter', function() {
        const menu = document.getElementById('menu');
        menu.style.display = 'block';
    });

    // סגירת התפריט המקורי כאשר העכבר יוצא מגבולות התפריט
    document.getElementById('menu').addEventListener('mouseleave', function() {
        document.getElementById('menu').style.display = 'none';
    });

    // פתיחת התפריט החדש כאשר העכבר עובר על הסמל
    document.getElementById('openSecretMenuIcon').addEventListener('mouseenter', function() {
        const secretMenu = document.getElementById('secretMenu');
        secretMenu.style.display = 'block';
        // הסרת האנימציה כשהתפריט נפתח
        this.classList.remove('pulsate');
    });

    // סגירת התפריט החדש כאשר העכבר יוצא מגבולות התפריט
    document.getElementById('secretMenu').addEventListener('mouseleave', function() {
        document.getElementById('secretMenu').style.display = 'none';
    });

    // פתיחת תיבת הקלט לרעיון
    document.getElementById('openIdeaInput').addEventListener('click', function() {
        document.getElementById('ideaInputContainer').style.display = 'block';
    });

    function createHearts() {
        for (let i = 0; i < 30; i++) {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.style.left = `${Math.random() * 100}vw`;
            heart.style.top = `${Math.random() * 100}vh`;
            heart.style.backgroundColor = 'red'; // צבע ברירת מחדל של הלבבות
            document.body.appendChild(heart);

            setTimeout(() => {
                heart.remove();
            }, 5000); // הלבבות ייעלמו אחרי 5 שניות
        }
    }
    </script>
</body>
</html>
